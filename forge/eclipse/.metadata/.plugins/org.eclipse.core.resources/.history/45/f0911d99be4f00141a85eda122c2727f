package com.parmandorc.LearningMobs.Commands;

import com.parmandorc.LearningMobs.Fighter.EntityLMFighter;

import net.minecraft.command.CommandBase;
import net.minecraft.command.ICommandSender;
import net.minecraft.util.ChatComponentText;
import net.minecraft.util.ChatComponentTranslation;

public class SetQRandomSelectionRateCommand extends CommandBase
{
	@Override
	public String getCommandName() 
	{
		return "setQRandomSelectionRate";
	}

	@Override
	public String getCommandUsage(ICommandSender p_71518_1_) 
	{
		return "/setQRandomSelectionRate <LearningMobClassName> [value] // Sets the QRandomSelectionRate factor for the specified class. LearningMobClassName valid values: LMFigher";
	}

	@Override
	public void processCommand(ICommandSender commandsender, String[] args) 
	{
		if (args.length == 0 || args.length > 2)
		{
			commandsender.addChatMessage(new ChatComponentTranslation("msg.setQRandomSelectionRateCommand_InvalidArguments.txt"));
			return;
		}
		
		if (args[0].equals("LMFighter"))
		{
			if (args.length == 1)
			{
				commandsender.addChatMessage(new ChatComponentTranslation("msg.setQRandomSelectionRateCommand_printGeneral.txt"));
				commandsender.addChatMessage(new ChatComponentText("LMFighter is: "+EntityLMFighter.QRandomSelectionRate));
				return;
			}
			
			double value = getDoubleValue(args[1]);
			if (value == -1)
			{
				commandsender.addChatMessage(new ChatComponentTranslation("msg.setQRandomSelectionRateCommand_InvalidValue.txt"));
				return;
			}
			else
			{
				commandsender.addChatMessage(new ChatComponentTranslation("msg.setQRandomSelectionRateCommand_printGeneral.txt"));
				commandsender.addChatMessage(new ChatComponentText("LMFighter: "+value));
				EntityLMFighter.QRandomSelectionRate = value;
			}
		}
		else
		{
			commandsender.addChatMessage(new ChatComponentTranslation("msg.setQRandomSelectionRateCommand_InvalidClass.txt"));
			return;
		}
	}

	private double getDoubleValue(String string)
	{
		double value;
		try  
		{  
			value = Double.parseDouble(string);  
		}  
		catch(NumberFormatException nfe)  
		{  
			return -1;  
		}  
		
		if (value < 0 || value > 1)
			return -1;
		
		return value;  
	}
}
